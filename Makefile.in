####### Makefile for khmahjongg

kde_libraries = @kde_libraries@
qt_libraries = @qt_libraries@
top_builddir = ..
LIBTOOL = @LIBTOOL@
KDE_RPATH = @KDE_RPATH@
install_root    = @install_root@
kde_datadir     = @kde_datadir@
kde_appsdir     = @kde_appsdir@
kde_bindir      = @kde_bindir@
kde_minidir     = @kde_minidir@
kde_icondir     = @kde_icondir@
kde_confdir     = @kde_confdir@
kde_htmldir     = @kde_htmldir@

####### Install

INSTALL = @INSTALL@ -m 0755 
INSTALL_DATA = @INSTALL@ -m 0644
INSTALL_DIR = @INSTALL@ -d -m 0755

prefix = @prefix@
BINDIR = $(kde_bindir)
PICSDIR = $(kde_datadir)kmahjongg/pics
DOCSDIR = $(kde_htmldir)/en/kmahjongg
APPSDIR = $(kde_appsdir)/Games

####### Defines

DEFS	=	-DHAVE_CONFIG_H
CXXFLAGS=	@CXXFLAGS@ -fno-strength-reduce @all_includes@ -I.. -I. 
LDFLAGS	=	@LDFLAGS@ @all_libraries@ -lkdeui -lkdecore -lqt -lX11 -lXext @LIBSOCKET@
CXX	=	@CXX@
MOC	=	@MOC@

####### Files

OBJECTS	=	kmahjongg.o static.o
SRCMETA	=	kmahjongg.moc
TARGET	=	kmahjongg
DOCS    =	index.html

####### Implicit rules
.SUFFIXES: .cpp .moc

.cpp.o:
	$(CXX) $(CXXFLAGS) $(DEFS) -c $<

.h.moc:
	$(MOC) $< -o $@

####### Build rules

all: $(TARGET)

Makefile: Makefile.in
	cd .. && CONFIG_FILES=kmahjongg/$@ CONFIG_HEADERS= $(SHELL) ./config.status

$(TARGET): $(SRCMETA) $(OBJECTS) 
	$(LIBTOOL) --mode=link $(CXX) $(OBJECTS) -o $(TARGET) $(LDFLAGS) $(KDE_RPATH)

install: all
	$(INSTALL_DIR) $(BINDIR)
	$(INSTALL) $(TARGET) $(BINDIR)
	$(INSTALL_DIR) $(DOCSDIR)
	$(INSTALL_DATA) $(DOCS) $(DOCSDIR)
	$(INSTALL_DIR) $(APPSDIR)
	$(INSTALL_DATA) kmahjongg.kdelnk      $(APPSDIR)
	$(INSTALL_DIR) $(PICSDIR)
	$(INSTALL_DATA) kmahjongg.bmp         $(PICSDIR)
	$(INSTALL_DATA) kmahjongg_bgnd.bmp    $(PICSDIR)

uninstall:
	rm -f $(BINDIR)/$(TARGET)
	rm -f $(DOCSDIR)/$(DOCS)
	rm -f $(APPSDIR)/kmahjongg.kdelnk
	rm -f $(PICSDIR)/kmahjongg.bmp
	rm -f $(PICSDIR)/kmahjongg_bgnd.bmp

clean:
	-rm -f *.o *.bak *~ *% #*
	-rm -f $(SRCMETA) $(TARGET)

distclean: clean
	rm -f Makefile

depend:
	makedepend -I$(QTDIR)/include -I$(KDEDIR)/include *.cpp 

# DO NOT DELETE THIS LINE -- make depend depends on it.

